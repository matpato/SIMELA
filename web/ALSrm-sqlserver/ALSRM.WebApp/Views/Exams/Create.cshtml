@using ALSRM.WebApp.Resources
@model ALSRM.WebApp.Models.ExamViewModels

@{
    ViewBag.Title = CreateExamResources.Create;
}

<h2>Create</h2>

<div style="overflow: hidden; width: 100%;">
    <div style="float: left">
        @Html.AntiForgeryToken()

        <div class="form-horizontal">
            <h4 style="text-align: center">@ExamResources.Exam</h4>
            <hr/>
            @Html.ValidationSummary(true, "", new {@class = "text-danger"})
            <div class="form-group">
                <label class="control-label col-md-2">@ExamResources.Type</label>
                <div class="col-md-10">
                    @Html.DropDownList("ExamType", null, new {@class = "form-control", id = "ExamType", onchange="changeExamType(this.value)" })
                    @Html.ValidationMessageFor(model => model.ExamType, "", new {@class = "text-danger"})
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-md-2">@ExamResources.State</label>
                <div class="col-md-10">
                    @Html.DropDownList("ExamState", null, new {@class = "form-control", id = "ExamState"})
                    @Html.ValidationMessageFor(model => model.ExamState, "", new {@class = "text-danger"})
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-md-2">@ExamResources.InitialDate</label>
                <div class="col-md-10">
                    @Html.EditorFor(model => model.ExamInitialDate, new {htmlAttributes = new {@class = "form-control", id = "ExamInitialDate", placeholder = "dd/mm/aaaa"}})
                    @Html.ValidationMessageFor(model => model.ExamInitialDate, "", new {@class = "text-danger"})
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-md-2">@ExamResources.EndDate</label>
                <div class="col-md-10">
                    @Html.EditorFor(model => model.ExamEndDate, new {htmlAttributes = new {@class = "form-control", id = "ExamEndDate", placeholder = "dd/mm/aaaa"}})
                    @Html.ValidationMessageFor(model => model.ExamEndDate, "", new {@class = "text-danger"})
                </div>
            </div>

            <div id="musclediv" class="form-group" style="display:none">
                <label class="control-label col-md-2">@ExamResources.Muscle</label>
                <div class="col-md-10">
                    @Html.DropDownList("MuscleId", null, new {@class = "form-control", id = "MuscleAbb"})
                    @Html.ValidationMessageFor(model => model.MuscleAbb, "", new {@class = "text-danger"})
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-md-2">@ExamResources.UserId</label>
                <div class="col-md-10">
                    @Html.DropDownList("UserId", null, new {@class = "form-control", id = "UserId"})
                    @Html.ValidationMessageFor(model => model.UserId, "", new {@class = "text-danger"})
                </div>
            </div>

            <!--<div class="form-group">
                <div class="col-md-10">
                    @Html.Partial("~/Views/_test.cshtml");
                </div>
            </div>
            -->
        </div>
    </div>
    <div style="margin-left: 45%; overflow: hidden; text-align: center;">
        <div style="display: inline-block">
            <h4>@ExamResources.ExamStep</h4>
            <button style="text-transform: none;" type="button" class="btn btn-default" onclick="cloneRow('examsteptable', 'examsteprow-0')">
                <span aria-hidden="true">
                        <img src="~/Content/Images/biosignal.png" title="Completed" width="24">
                    </span>
                @CreateExamResources.AddNewStep
            </button>
        </div>
        <hr/>
        <div class="table-responsive">
            <table class="table">
                <thead>
                <tr>
                    <td>@ExamResources.Description</td>
                    <td>@ExamResources.State</td>
                    <td>@ExamResources.Time</td>
                </tr>
                </thead>
                <tbody id="examsteptable">
                <tr id="examsteprow-0" style="display: table-row">
                    <td style="border: none">@Html.DropDownList("Description", null, new {@class = "form-control"})</td>
                    <td style="border: none">@Html.DropDownList("State", null, new {@class = "form-control"})</td>
                    <td style="border: none">@Html.EditorFor(model => model.UserId, new {htmlAttributes = new {@class = "form-control", type = "number", min = "0"}})</td>
                    <td id="removebtn-0" style="border: none; display: none">
                        <button type="button" class="btn btn-default addButton" onclick="deleteRow(this.parentNode.id.replace('removebtn-', 'examsteprow-'))">
                            <span class="glyphicon glyphicon glyphicon-minus" aria-hidden="true"></span>
                        </button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <button type="button" value="Create" onclick="createExam()" class="btn btn-default addButton">
                @CreateExamResources.Create</button>
        </div>
    </div>
</div>

<script src="~/Scripts/sharedfuncitons.js"></script>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}